<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Shooting game</title>

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <!-- Extras -->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <!-- Nav mesh plugin -->
    <script src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js"></script>
    <!-- Physics -->
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <!-- Environment -->
    <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <!-- JS Files -->
    <script src="./shoot.js"></script>
    <script src="./gameObjects.js"></script>
    <script src="./playerMovement.js"></script>
  </head>
  <body>
    <a-scene
      id="scene"
      physics="restitution: 0;"
      bullets
      fences
      boxes
      footsteps
      inspector-plugin-recast
    >
      <a-assets timeout="15000">
        <audio id="shoot-sound" src="./assets/shoot.mp3"></audio>
        <audio id="footsteps-sound" src="./assets/footStep.mp3"></audio>
        <a-asset-item id="navmesh" src="./models/navmesh.gltf"></a-asset-item>
      </a-assets>

      <!-- Nav mesh -->
      <a-entity nav-mesh gltf-model="#navmesh" visible="false"></a-entity>

      <!-- Camera -->
      <a-entity
        movement-controls="speed: 0.2; constrainToNavMesh: true;"
        position="0 1 2"
      >
        <a-camera id="camera" look-controls="pointerLockEnabled: true">
          <a-entity
            gltf-model="./models/shooter/gun.gltf"
            position="0 -0.6 -0.6"
            rotation="0 180 0"
            scale="0.1 0.1 0.1"
            id="weapon"
          ></a-entity>
          <a-cursor
            position="0 0 -0.1"
            scale="0.15 0.15 0.15"
            opacity="1"
          ></a-cursor>
          <a-sound
            id="sound1"
            src="#shoot-sound"
            poolSize="20"
            autoplay="false"
            volume="0.5"
            loop="false"
          ></a-sound>
          <a-sound
            id="sound2"
            src="#footsteps-sound"
            poolSize="20"
            autoplay="false"
            loop="false"
            volume="0.5"
          ></a-sound>
        </a-camera>
      </a-entity>

      <!-- Environment Entinty -->
      <a-entity
        id="environment"
        environment="preset: default; fog: 0.8; ground: flat; groundTexture: none; groundColor: forestGreen;"
      ></a-entity>

      <a-box
        visible="false"
        position="0 -0.5 0"
        scale="200 1 200"
        static-body
      ></a-box>
    </a-scene>
  </body>
</html>
